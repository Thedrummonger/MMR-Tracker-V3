@page "/counter"
@using MMR_Tracker_V3;

<h1>Counter</h1>

<p role="status">@currentCount</p>

<button class="btn btn-primary" @onclick="IncrementCount">Click me</button>

@code {
	private string currentCount = "No Data";

	private MMR_Tracker_V3.TrackerObjects.MiscData.InstanceContainer InstanceContainer = new() { Instance = new() };
	private TrackerDataHandeling.DataSets DataSets = new();

	private void IncrementCount()
	{
		System.Net.WebClient wc = new System.Net.WebClient();
		var Logic = wc.DownloadString("https://raw.githubusercontent.com/ZoeyZolotova/mm-rando/dev/MMR.Randomizer/Resources/REQ_CASUAL.txt");
		System.Diagnostics.Debug.WriteLine("Downloaded Logic");

		var Dictionary = wc.DownloadString("https://raw.githubusercontent.com/Thedrummonger/MMR-Tracker-V3/master/MMR%20Tracker%20V3/Recources/Dictionaries/MMR%20V11.json");
		System.Diagnostics.Debug.WriteLine("Downloaded Dict");

		MMR_Tracker_V3.InstanceData.TrackerInstance TempInstance = new InstanceData.TrackerInstance();
		TempInstance.GenerateInstance(Logic, Dictionary);

		InstanceContainer.Instance = TempInstance;

		InstanceContainer.logicCalculation.CalculateLogic();

		DataSets = MMR_Tracker_V3.TrackerDataHandeling.PopulateDataSets(InstanceContainer.Instance);

		currentCount = "";
		foreach (var i in DataSets.AvailableLocations)
		{
			currentCount = currentCount + Utility.GetLocationDisplayName(i, InstanceContainer.Instance) + Environment.NewLine;
		}
	}
}
